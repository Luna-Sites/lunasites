// Unified Block Styles - Force identical rendering in Edit and View modes
// ONLY WITHIN CustomSectionBlock to avoid breaking standard Volto layouts

// Apply styles only within CustomSectionBlock containers
.custom-section-block-edit,
.custom-section-block-view {
  
  // Reset Volto edit-mode specific styles within our block
  .block-editor-wrapper,
  .block-editor,
  .block-chooser,
  .blocks-chooser {
    &::before,
    &::after {
      display: none !important; // Remove edit mode indicators
    }
  }

  // Force blocks to render identically within our grid/freeform layouts
  .block,
  .block-editor-wrapper .block,
  .freeform-block-wrapper .block,
  .freeform-item .block,
  .linear-item .block,
  .grid-block-wrapper .block {
  // Reset ALL Volto default styles that differ between modes
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
  
  // Ensure blocks fill their containers
  width: 100% !important;
  height: 100% !important;
  
  // Image blocks - force consistent rendering
  &.image {
    position: relative !important;
    
    figure {
      width: 100% !important;
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      background: transparent !important;
    }
    
    img {
      max-width: 100% !important;
      max-height: 100% !important;
      width: auto !important;
      height: auto !important;
      object-fit: contain !important; // Always use contain for consistency
      display: block !important;
      border: none !important;
      outline: none !important;
    }
    
    // Remove any edit mode specific image styling
    .image-editor,
    .image-wrapper {
      border: none !important;
      outline: none !important;
      box-shadow: none !important;
    }
  }
  
  // Button blocks - force consistent rendering
  &.__button,
  &.button {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
    height: 100% !important;
    
    .ui.button,
    button {
      // Button resizes based on container - don't force width/height
      // These properties should come from block data
      min-width: auto !important;
      width: 100% !important;  // Fill container width
      height: 100% !important; // Fill container height
      max-width: 100% !important;
      border: none;
      outline: none;
      box-shadow: none;
    }
    
    // Remove edit mode wrappers
    .button-editor,
    .button-wrapper {
      width: 100% !important;
      height: 100% !important;
      border: none !important;
      outline: none !important;
    }
  }
  
  // Text/Slate blocks - force consistent rendering but allow interaction
  &.text,
  &.slate,
  &.description {
    width: 100% !important;
    height: auto !important; // Let height grow with content
    min-height: 100% !important; // But fill container as minimum
    overflow: visible !important; // Allow content to expand container
    
    // Remove edit mode borders and outlines but preserve functionality
    .slate-editor,
    .text-editor,
    .DraftEditor-root,
    .public-DraftEditor-content {
      border: none !important;
      outline: none !important;
      box-shadow: none !important;
      // Keep padding for text readability
      min-height: 1em !important; // Minimum height for cursor visibility
      height: auto !important;
    }
    
    // Ensure text fills container
    p, div, span {
      background: transparent !important;
    }
  }
  
  // Video blocks
  &.video {
    width: 100% !important;
    height: 100% !important;
    
    iframe,
    video {
      width: 100% !important;
      height: 100% !important;
      border: none !important;
    }
  }
  } // Close .block styles
  
  // Force image blocks to respect container size in both modes
  .freeform-block-wrapper,
  .freeform-item {
    .block.image {
      // When containerSize is set, respect it
      &[data-has-container-size="true"] {
        figure {
          width: 100% !important;
          height: 100% !important;
        }
        
        img {
          object-fit: contain !important;
        }
      }
    }
  }

  // Remove Volto edit mode UI elements within our block
  .blocks-edit-wrapper {
    .block-add-button,
    .block-toolbar,
    .block-drag-handle {
      // Keep functionality but remove visual differences
      opacity: 0;
      transition: opacity 0.2s;
      
      &:hover {
        opacity: 1;
      }
    }
  }

  // Ensure consistent rendering in freeform grid
  .freeform-grid {
    .block-content {
      // Don't add any styling that would differ between modes
      border: none !important;
      outline: none !important;
      padding: 0 !important;
      margin: 0 !important;
    }
  }

} // Close .custom-section-block-edit, .custom-section-block-view scope