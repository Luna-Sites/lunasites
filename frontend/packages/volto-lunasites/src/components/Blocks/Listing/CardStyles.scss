// Generic Card Styles for Listing Templates
// Uses intelligent color formulas based on user's brand colors

.card-container {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  transition: all 0.3s ease;
  width: 100%;
  max-width: 100%;

  // Filled cards - with background and paper effect
  &.filled {
    // Intelligent background color formula based on user's palette
    background: color-mix(in srgb, var(--lunasites-background-color, #ffffff) 85%, var(--lunasites-primary-color, #094ce1) 15%);
    
    // Sophisticated shadow using brand colors for depth
    box-shadow: 
      0 2px 8px color-mix(in srgb, var(--lunasites-neutral-color, #222222) 15%, transparent),
      0 0 0 1px color-mix(in srgb, var(--lunasites-primary-color, #094ce1) 8%, transparent);

    &:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 8px 25px color-mix(in srgb, var(--lunasites-neutral-color, #222222) 20%, transparent),
        0 0 0 1px color-mix(in srgb, var(--lunasites-primary-color, #094ce1) 12%, transparent);
      
      // Subtle background shift on hover using secondary color
      background: color-mix(in srgb, var(--lunasites-background-color, #ffffff) 80%, var(--lunasites-secondary-color, #e73d5c) 20%);
    }
  }

  // Transparent cards - no background, no shadow
  &.transparent {
    background: transparent;
    box-shadow: none;

    &:hover {
      transform: none;
      box-shadow: none;
      background: transparent;
    }
  }

  .image-container {
    position: relative;
    overflow: hidden;
    
    // Add subtle border using tertiary color
    border-bottom: 2px solid color-mix(in srgb, var(--lunasites-tertiary-color, #6bb535) 30%, transparent);
  }

  .item-image {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.3s ease;
  }

  // Default card style - content below image
  &.card-style-default {
    .card-content {
      padding: 1.2rem;
      color: var(--lunasites-neutral-color, #222222);
    }

    // Filled variant - with background
    &.filled .card-content {
      // Sophisticated text background using primary color mix
      background: color-mix(in srgb, var(--lunasites-background-color, #ffffff) 90%, var(--lunasites-primary-color, #094ce1) 10%);
    }

    // Transparent variant - no background (no paper effect)
    &.transparent .card-content {
      background: transparent;
      
      .headline {
        font-size: 0.875rem;
        // Use tertiary color for headlines with opacity
        color: color-mix(in srgb, var(--lunasites-tertiary-color, #6bb535) 80%, var(--lunasites-neutral-color, #222222) 20%);
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 500;
      }

      h2 {
        margin: 0 0 0.5rem 0;
        font-size: 1.25rem;
        font-weight: 600;
        line-height: 1.3;
        color: var(--lunasites-neutral-color, #222222);
      }

      p {
        margin: 0 0 0.75rem 0;
        // Subtle text color using neutral + primary mix
        color: color-mix(in srgb, var(--lunasites-neutral-color, #222222) 75%, var(--lunasites-primary-color, #094ce1) 25%);
        line-height: 1.5;
      }

      .item-date {
        font-size: 0.875rem;
        color: color-mix(in srgb, var(--lunasites-neutral-color, #222222) 60%, transparent);
        margin-bottom: 0.25rem;
      }

      .item-author {
        font-size: 0.875rem;
        color: color-mix(in srgb, var(--lunasites-tertiary-color, #6bb535) 70%, var(--lunasites-neutral-color, #222222) 30%);
        font-style: italic;
      }
    }
  }

  // Overlay card style - content over image
  &.card-style-overlay {
    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      // Sophisticated gradient using brand colors
      background: linear-gradient(
        to bottom,
        color-mix(in srgb, var(--lunasites-primary-color, #094ce1) 10%, transparent) 0%,
        color-mix(in srgb, var(--lunasites-neutral-color, #222222) 70%, var(--lunasites-primary-color, #094ce1) 30%) 100%
      );
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: flex-end;

      .overlay-content {
        padding: 1.5rem;
        color: var(--lunasites-background-color, #ffffff);
        width: 100%;

        .headline {
          font-size: 0.875rem;
          margin-bottom: 0.5rem;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          opacity: 0.9;
          // Subtle accent using tertiary color
          color: color-mix(in srgb, var(--lunasites-background-color, #ffffff) 80%, var(--lunasites-tertiary-color, #6bb535) 20%);
        }

        h2 {
          margin: 0 0 0.5rem 0;
          font-size: 1.25rem;
          font-weight: 600;
          line-height: 1.3;
          text-shadow: 0 1px 2px color-mix(in srgb, var(--lunasites-neutral-color, #222222) 80%, transparent);
          color: var(--lunasites-background-color, #ffffff);
        }

        p {
          margin: 0 0 0.75rem 0;
          line-height: 1.5;
          opacity: 0.95;
          text-shadow: 0 1px 2px color-mix(in srgb, var(--lunasites-neutral-color, #222222) 80%, transparent);
          color: var(--lunasites-background-color, #ffffff);
        }

        .item-date {
          font-size: 0.875rem;
          margin-bottom: 0.25rem;
          opacity: 0.9;
          color: var(--lunasites-background-color, #ffffff);
        }

        .item-author {
          font-size: 0.875rem;
          font-style: italic;
          opacity: 0.9;
          color: var(--lunasites-background-color, #ffffff);
        }
      }
    }

    &:hover .overlay {
      opacity: 1;
    }
  }

  // Aspect ratio styles - only for grid layout, not Pinterest
  &:not(.pinterest-card) {
    &.aspect-ratio-1\:1 .image-container {
      aspect-ratio: 1 / 1;
    }

    &.aspect-ratio-4\:3 .image-container {
      aspect-ratio: 4 / 3;
    }

    &.aspect-ratio-16\:9 .image-container {
      aspect-ratio: 16 / 9;
    }

    &.aspect-ratio-3\:4 .image-container {
      aspect-ratio: 3 / 4;
    }
  }

  // Pinterest cards should never have fixed aspect ratios for masonry effect
  &.pinterest-card .image-container {
    aspect-ratio: unset !important;
    height: auto !important;
  }
}